create database onlineshopping;
use onlineshopping;
-- *CUSTOMER TABLE*
CREATE TABLE CUSTOMER(
CUSOMER_ID INT PRIMARY KEY, 
CUSTOMER_NAME VARCHAR(20) NOT NULL,
EMAIL VARCHAR(25) NOT NULL,
PhoneNumber INT   NOT NULL,
 customer_ADDRESS VARCHAR(50) NOT NULL);
INSERT INTO CUSTOMER (CUSOMER_ID,CUSTOMER_NAME,EMAIL,PhoneNumber,CUSTOMER_ADDRESS)
               VALUES(1,'AHMED','AHMED12@gmail.com',0128748,'CAIRO'),
			         (2,'OMAR','OMAR13@gmail.com',0109887,'GIZA'),
					 (3, 'NADA','NADA15@gmail.com',0119872,'ALEX');
-- *ORDER TABLE*
CREATE TABLE ORDER1(
ORDER_ID INT PRIMARY KEY ,
CUSTOMER_ID INT NOT NULL,
FOREIGN KEY (CUSOMER_ID) REFERENCES CUSTOMER (CUSOMER_ID),
ORDER_DATE DATE NOT NULL,
TOTAL_AMOUNT DECIMAL (10,2) NOT NULL,
ORDER_STATUS VARCHAR(20) NOT NULL);
INSERT INTO ORDER1(ORDER_ID,CUSTOMER_ID,ORDER_DATE,TOTAL_AMOUNT,ORDER_STATUS)
              VALUES(4,1,'2014-8-8',123.24,'PENDING'),
			        (5,2,'2015-9-8',122.43,'SHIPPED'),
					(6,3,'2012-8-4',187.33,'DELIVERD');
UPDATE ORDER1  
SET ORDER_DATE = CURRENT_DATE  
WHERE ORDER_ID> 0;
-- *ORDER DETAILS*
CREATE TABLE ORDER_DETAILS(
ORDER_DETAILS_ID INT PRIMARY KEY, 
QUANTITY INT NOT NULL, 
PRICE DECIMAL (7,3) NOT NULL,
);
INSERT INTO  ORDER_DETAILS(ORDER_DETAILS_ID,QUANTITY,PRICE)
                    VALUES(7,123,888.761),
					      (8,299,243.874),
						  (9,899,343.911);
-- *PRODUCT TABLE *
CREATE TABLE PRODUCT1(
PRODUCT_ID INT PRIMARY KEY ,
CATEGORY VARCHAR(20) NOT NULL,
PRODUCT_NAME VARCHAR(50) NOT NULL,
 PRODUCT_DESCRIPTION VARCHAR(50) NOT NULL,
PRICE DECIMAL (8,3) NOT NULL);
INSERT INTO PRODUCT1(PRODUCT_ID,CATEGORY,PRODUCT_NAME, PRODUCT_DESCRIPTION,PRICE )
            VALUES(4,'ELECTRONICS','COMPUTER','POWERFUL computer',29000.123),
			      (12,'CLOTHES','DRESS','beautiful dress',3000.234),
				  (22,'ELECTRONICS','laptop','powerful labtop intel corei7',66543.912);

ALTER TABLE PRODUCT1 ADD CONSTRAINT  DF_CATEGORY  DEFAULT 'NEW' FOR CATEGORY;
--ADD NEW TABLE NAMED RATING 
ALTER TABLE  PRODUCT1 ADD RATING1 DECIMAL (2,1) DEFAULT 0;
--DROP COLUMN RATING 
DROP TABLE RATING1 ;
-- DELETE ROWS
DELETE FROM PRODUCT1 WHERE PRODUCT_NAME IS NOT NULL AND <>'NULL' ;
-- *SUPLIER TABLE*
CREATE TABLE SUPLIER(
SUPLIER_ID INT PRIMARY KEY , 
 SUPLIER_NAME VARCHAR(40) NOT NULL,
 CONCAT_INFO VARCHAR(50) NOT NULL);
 insert into SUPLIER(SUPLIER_ID,SUPLIER_NAME, CONCAT_INFO)
             values(9,'intel','www.intel.com'),
			       (3,'nvidia','www.nvidia.com'),
				   (7,'shein','www.shein.com');
-- PRODUCT SUPLIER
CREATE TABLE PRODUCT_SUPLIER (
SUPLIER_ID INT,
PRODUCT_ID INT,
PRIMARY KEY (SUPLIER_ID,PRODUCT_ID),
FOREIGN KEY (SUPLIER_ID) REFERENCES SUPLIER (SUPLIER_ID),
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT1(PRODUCT_ID));
insert into PRODUCT_SUPLIER (SUPLIER_ID,PRODUCT_ID)
                      values(9,4),
					        (3,12),
					        (7,22);

-- *ASSOCIATED TABLE*
CREATE TABLE ASSOCIATED (
PRODUCT_ID INT ,
ORDER_ID INT ,
ORDER_DETAILS_ID INT,
PRIMARY KEY (PRODUCT_ID , ORDER_ID),
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT1(PRODUCT_ID),
FOREIGN KEY (ORDER_ID) REFERENCES ORDER1 (ORDER_ID),
FOREIGN KEY (ORDER_DETAILS_ID) REFERENCES ORDER_DETAILS(ORDER_DETAILS_ID));
insert into ASSOCIATED (PRODUCT_ID,ORDER_ID,ORDER_DETAILS_ID)
                values (4,4,7),
				       (12,5,8),
				       (22,6,9);
-- * ORDER PRODUCT*
CREATE TABLE ORDER_PRODUCT(
PRODUCT_ID INT , 
ORDER_ID INT , 
PRIMARY KEY (PRODUCT_ID,ORDER_ID),
FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT1 (PRODUCT_ID),
FOREIGN KEY (ORDER_ID) REFERENCES ORDER1 (ORDER_ID)
);
insert into  ORDER_PRODUCT(PRODUCT_ID,ORDER_ID )
              values(4,4),
			        (12,5),
					(22,6);






